<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>首页</title>
  <link rel="stylesheet" href="../../../dist/css/bootstrap.min.css">
<!--  <link href="http://libs.baidu.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">-->
  <link href="../css/signin.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css">
    <!-- Custom CSS -->
    <link href="../css/main.css" rel="stylesheet">
    <!-- Google fonts -->
    <link href='http://fonts.googleapis.com/css?family=Roboto:500,300,700,400' rel='stylesheet' type='text/css'>
    <!-- Icons -->
    <link rel="stylesheet" href="../css/icomoon.css">
  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>

  <![endif]-->
	<link rel="shortcut icon" href="#" />
  <style>
    #tall {
      height: 1500px;
      width: 100px;
      background-color: black;
      color: white;
    }
    #regist{
    	margin-right: 20px;
    }
    .input-group-lg{
    	margin-top:15px;
    }
    #login_btn{
    	margin-bottom:20px;
    	width: 66%;
    }
    /* 轮播广告 */

        .carousel {
            height: 400px;
        }

        .carousel .item {
            height: 400px;
            background-color: #000;
        }

        .carousel .item img {
            width: 100%;
        }

        .carousel-caption {
            z-index: 10;
        }

        .carousel-caption p {
            margin-bottom: 20px;
            font-size: 20px;
            line-height: 1.8;
        }
        .cont{
					overflow: hidden;/*内容超出后隐藏*/
					text-overflow: ellipsis;/* 超出内容显示为省略号*/
					white-space: nowrap;/*文本不进行换行*/
		}
  </style>
</head>
<body>

<nav class="navbar navbar-default navbar-static-top navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">美食爱好者</a>
    </div>
    <div class="navbar-collapse collapse" style="position: relative">
      <ul class="nav navbar-nav">
        <li class="active"><a href="http://localhost:8080/fonts/bootstrap-3.3.7/js/tests/visual/index.html">首页</a></li>
        <li><a href="personal.html">个人中心</a></li>
        <li><a href="#">关于</a></li>

    	</ul>
    	<ul class="nav navbar-nav navbar-right navbar-">

        <li>
	        <a class="nav navbar-nav navbar-right " data-toggle="modal" data-target="#myModal2" >
				登录
	        </a>
        </li>
		  	<li>
		  		<!-- <a  href="register.html" class="nav navbar-nav navbar-right" id="regist" >注册</a> -->
          <a  class="nav navbar-nav navbar-right" data-toggle="modal" data-target="#myModal1" id="regist" >注册</a>
		  	</li>
      </ul>

    	<form class="navbar-form navbar-right">
    		<div class="form-group">
    			<input type="text" class="form-control" placeholder="请输入关键词" id="search-input" />
    		</div>
    		<button type="button" class="btn btn-default" style="opacity: 0.8" id="search-button">搜索</button>
    	</form>
		<script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.js"></script>
		<script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
		<div id="span_username"  style="position: absolute;left: 305px;top:15px;"></div>

		<script>

			$(function (){
				//页面加载完成显示用户名
				$.get("/findUserServlet",{},function(data){
					var msg = "欢迎回来,"+data.username;
					$("#span_username").html(msg);
				});

				//点击搜索获取输入框值
				$("#search-button").click(function (){
					var rname = $("#search-input").val();

					//将输入框提交值拼到路径中
					location.href="http://localhost:8080/fonts/bootstrap-3.3.7/js/tests/visual/index.html?rname="+rname;

				})

				//等号切割取右边
				var search = location.search;
				rname = search.split("=")[1];
				if (rname){
					//解码url 防止中文乱码
					rname = window.decodeURIComponent(rname);
				}

				//分页
				load(null,rname);
			})

		</script>

    </div>
  </div>
</nav>

<div class="container">
  <div id="myModal1" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog">
      <div class="modal-content">

        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h2 class="modal-title" id="myModalLabel">注册</h2>
        </div>

        <div class="modal-body">
        	<form id="registerForm" enctype="multipart/form-data" action="#" method="post" autocomplete="off">
				<div id="errorMsg" style="color: #ff0000;text-align: center"></div>
            <div class="row">
                <div class="col-md-offset-2 col-md-7">
                   <div class="input-group">  
                         <p><label class="pass-label">添加头像</label>
                            <input type="file" name="file" onchange="PreviewImage(this,'imgHeadPhoto','divPreview');" size="20" />
                            <!-- <input  type="submit" value="上传"/> -->
                         </p>
                   </div>
                </div>
            </div></br>

            <div class="row">
              
                <div class="col-md-offset-2 col-md-7">
                   <div class="input-group">  
                       <span class="input-group-addon" id="basic-addon1">
                             <span class="glyphicon glyphicon-user"> </span>
                       </span>
                         <input type="text" class="form-control" style="opacity: 0.8" placeholder="用户名" id="username" onblur="nameCheck()">

				   </div>


           
                </div>
<!--              <span style="color: red">用户名不合法</span>--><span class="username"></span>

            </div></br>

            <div class="row">
                <div class="col-md-offset-2 col-md-7 form-group">
                   <div class="input-group">  
                       <span class="input-group-addon" id="basic-addon1">
                             <span class="glyphicon glyphicon-lock"> </span>
                        </span>
                        <input type="password" style="opacity: 0.8" class="form-control" placeholder="密码" id="password" onblur="pwdCheck()">

                    </div>
                </div>
				<span class="password"></span>

            </div>

			<div class="row">
            	<div class="col-md-offset-2 col-md-7 form-group">
                     <div class="input-group">  
                       <span class="input-group-addon" id="basic-addon1">
                             <span class="glyphicon glyphicon-eye-open"> </span>
                        </span>               
                        <input type="password" class="form-control" style="opacity: 0.8" placeholder="确认密码" id="pwd1" onblur="pwdSure()">
                     </div>
                </div>
				<span class="pwd1"></span>
 			</div>

            <div class="row">
                <div class="col-md-offset-2 col-md-7">
                     <div class="input-group">  
                       <span class="input-group-addon" id="basic-addon1">
                             <span class="glyphicon glyphicon-envelope"> </span>
                        </span>
                            <input type="email" style="opacity: 0.8" class="form-control" placeholder="邮箱" id="email" onblur="emailCheck()">
                     </div>
                </div>
				<span class="email"></span>

			</div></br>

            <div class="row">
                <div class="col-md-offset-2 col-md-7">
                    <div class="input-group">  
                       <span class="input-group-addon" id="basic-addon1">
                             <span class="glyphicon glyphicon-earphone"> </span>
                        </span>
                        <input type="tel" style="opacity: 0.8"  class="form-control" placeholder="电话号码" id="telephone" onblur="telCheck()">
                    </div>
                </div>
				<span class="telephone"></span>
            </div><br>

			     <div class="row">
                <div class="col-md-offset-2 col-md-7">
                    <div class="input-group">  
                       <span class="input-group-addon" id="basic-addon1">
                             <span class="glyphicon glyphicon-qrcode"> </span>
                        </span>
                        <input type="tel" style="opacity: 0.8"  class="form-control" placeholder="请输入验证码" id="check" name="check">
                    </div>
                </div> 
                <!-- 验证码 图片 -->
<!--                <img src="img/code.jpg" alt="验证码" style="width:80px;height:40px;">-->
					 <img src="/checkCode" alt="" style="width:80px;height:40px;" onclick="changeCheckCode(this)">
					 <script type="text/javascript">
						 //图片点击事件
						 function changeCheckCode(img) {
							 img.src="/checkCode?"+new Date().getTime();
						 }
					 </script>
            </div><br>

            <div class="row">
              <div class="col-md-offset-2 col-md-4 form-group">
                <button type="button" style="opacity: 0.8" class="btn btn-success form-control" onclick="sub1()" >确认</button>
              </div>
            	<div class="col-md-4">
                <button type="reset" style="opacity: 0.8" class="btn btn-danger form-control" value="reset">清空</button> 
              </div>
            </div><br>
				<style>
					.red {
						color: red;
					}
				</style>
				<script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.js"></script>

				<script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
				<script>

					//正则表达式判断格式
					function nameCheck(str) {
						let reg = /^[\u4e00-\u9fa5]{2,6}$/;
						let username = $("#username").val();
						if (!reg.test(username) || username=='') {
							$(".username").html("<span class='red'>请输入2~6位中文</span>");
							return false;
						}else{
							$(".username").html("<i class='fa fa-check-square' style='color: green; font-size: x-large'></i>");
							return true;
						}
					}
					function pwdCheck(str) {
						let reg = /(?=.*[a-z_])(?=.*\d)[\S]/i;
						let password = $("#password").val();
						if(!reg.test(password) || password==''){
							$(".password").html("<span class='red'>请输入包含英文和数字的密码</span>")
							return false;
						}else{
							$(".password").html("<i class='fa fa-check-square' style='color: green;font-size: x-large'></i>");
							return true;
						}
					}
					function pwdSure(str) {
						if ($("#password").val() === $("#pwd1").val()) {
							$(".pwd1").html("<i class='fa fa-check-square' style='color: green;font-size: x-large'></i>");
							return true;
						} else {
							$(".pwd1").html("<span class='red'>两次密码输入不一致</span>")
							return false;
						}
					}
					function emailCheck(str) {
						let reg = /^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;
						let email = $("#email").val();
						if(!reg.test(email) || email==''){
							$(".email").html("<span class='red'>请输入正确的邮箱</span>")
							return false;
						}else{
							$(".email").html("<i class='fa fa-check-square' style='color: green;font-size: x-large'></i>");
							return true;
						}
					}
					function telCheck(str) {
						let reg = /^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$/;
						let telephone = $("#telephone").val();
						if(!reg.test(telephone) || telephone==''){
							$(".telephone").html("<span class='red'>请输入11位电话号码</span>")
							return false;
						}else{
							$(".telephone").html("<i class='fa fa-check-square' style='color: green;font-size: x-large'></i>");
							return true;
						}
					}


					function sub1() {

						//如果全部输入正确返回成功  输入错误则输出提示
						if(nameCheck() && telCheck() && emailCheck() && pwdCheck() && pwdSure()){
							fun();
							//alert("注册成功");

							}else{
						alert("输入有误");

					}

					}
					function flash(){
						window.location.reload();}
					function fun() {


						let username = $('#username').val();
						let password = $('#password').val();
						let email = $('#email').val();
						let telephone = $('#telephone').val();
						let check = $('#check').val();

						//var registerForm= $('#registerForm');
						$.ajax({
							dataType: "json",
							// 提交方式 get 或 post
							type: "post",
							// 需要访问的 Servlet 的映射路径 urlPatterns
							url:  "/registUserServlet",
							data: {
							    username: username,
								password: password,
								email: email,
								telephone: telephone,
								check: check
							},

							success: function(data) {
								if (data.flag){
									$("#errorMsg").html("");
									alert("注册成功!");

									setTimeout(flash());

								}else {
									$("#errorMsg").html(data.errorMsg);
								}
							}
						});
					}



				</script>
			</form>

        </div>
      </div>
    </div>
  </div>

  <div id="myModal2" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel2">
    <div class="modal-dialog">
      <div class="modal-content">
				<div class="modal-header">
          <button href="#home" type="button" class="close" data-dismiss="modal" aria-hidden="true" data-toggle="tab" onclick="login_onClick()">&times;</button>
          <h2 class="modal-title" id="myModalLabel">登录</h2>
        </div>
        <div class="modal-body tab-content">
        	<div class="tab-pane active" id="home">

	        	<form role="form" enctype="multipart/form-data" action="#" method="post">
					<div id="errorMsg1" style="color: red;text-align: center"></div>
		          <div class="row">
		            <div class="col-md-offset-2 col-md-8 form-group">
		              <div class="input-group">  
		                <span class="input-group-addon" id="basic-addon1">
		                	<span class="glyphicon glyphicon-user"> </span>
		                </span>
		                <input type="text" style="opacity: 0.8" class="form-control" placeholder="账号" id="login_username">
		              </div>
		            </div>
		          </div>

		          <div class="row">
		            <div class="col-md-offset-2 col-md-8">
		              <div class="input-group">  
		                <span class="input-group-addon" id="basic-addon1">
		                  <span class="glyphicon glyphicon-lock"> </span>
		                </span>
		                <input type="password" class="form-control" style="opacity: 0.8" placeholder="密码" id="login_password">
		              </div>
		            </div>
		          </div></br>

		          <div class="col-md-offset-2" style="margin-bottom:10px;">
			          <input type="checkbox" value="remember-me"> 记住我
			         	<a class="col-md-offset-6" href="#profile" data-toggle="tab" onclick="forget_onClick()">忘记密码？</a>
		          </div>

		          <button class="col-md-offset-2 btn btn-lg btn-primary btn-block" id="login_btn" type="button" onclick="fun1()">登录</button>

					<script>


						function fun1() {
							let login_username = $('#login_username').val();
							let login_password = $('#login_password').val();


							function flash(){
								window.location.reload();}


							$.ajax({
								dataType: "json",
								// 提交方式 get 或 post
								type: "post",
								// 需要访问的 Servlet 的映射路径 urlPatterns
								url: "/loginServlet",
								data: {
									username: login_username,
									password: login_password
								},

								success: function (data) {
									if (data.flag){
										$("#errorMsg1").html("");
										alert("登录成功");
										setTimeout(flash());
									}else {
										$("#errorMsg1").html(data.errorMsg);
									}

								}
							})
						}

					</script>

				</form>
		      </div>

	        <div class="tab-pane" id="profile">
	        	<form role="form"  action="#" method="post">
					<div id="errorMsg2" style="color: red;text-align: center"></div>
					<div class="row">
                <div class="col-md-offset-2 col-md-5">
	                <div class="input-group">  
	                  <span class="input-group-addon" id="basic-addon1">
	                    <span class="glyphicon glyphicon-envelope"> </span>
	                  </span>
	                  <input type="email" style="opacity: 0.8" class="form-control" placeholder="邮箱" id="select_email" name="email">
	                </div>
                </div>
	              <div class="col-md-4">
			            <button class="btn btn-success" type="button" onclick="settime(this);fun3()">获取验证码</button>
	              </div>
	            </div><br>

		          <div class="row">
		            <div class="col-md-offset-2 col-md-8">
		              <div class="input-group">  
		                <span class="input-group-addon" id="basic-addon1">
		                  <span class="glyphicon glyphicon-question-sign"> </span>
		                </span>
		                <input type="text" class="form-control" style="opacity: 0.8" placeholder="输入验证码" id="select_code">
		              </div>

		            </div>
                

                
		          </div><br>


		          <div class="row">
		            <div class="col-md-offset-2 col-md-8">
		              <div class="input-group">  
		                <span class="input-group-addon" id="basic-addon1">
		                  <span class="glyphicon glyphicon-lock"> </span>
		                </span>
		                <input type="password" class="form-control" style="opacity: 0.8" placeholder="输入新密码" id="select_password" onblur="pwdCheck1()" name="select_password">
		              </div>
						<span class="select_password"></span>
		            </div>
		          </div><br>

		          <div class="row">
		            <div class="col-md-offset-2 col-md-8">
		              <div class="input-group">  
		                <span class="input-group-addon" id="basic-addon1">
		                  <span class="glyphicon glyphicon-lock"> </span>
		                </span>
		                <input type="password" class="form-control" style="opacity: 0.8" placeholder="确认密码" id="select_pwd" onblur="pwdSur1()">
		              </div>
						<span class="select_pwd"></span>
		            </div>
		          </div><br>

		          <button class="col-md-offset-2 btn btn-lg btn-primary btn-block" id="login_btn" type="button" onclick="fun4()">确认</button>
		        </form>
				<script>
					function fun4(){
						if (pwdSur1()&&pwdCheck1()){
						let select_password = $('#select_password').val();
						let select_email = $('#select_email').val();
						let select_code = $('#select_code').val();


						$.ajax({
							dataType: "json",
							// 提交方式 get 或 post
							type: "post",
							// 需要访问的 Servlet 的映射路径 urlPatterns
							url: "/codeServlet",
							data: {
								code: select_code,
								password: select_password,
								email: select_email

							},

							success: function (data) {
								if (data.flag){
									$("#errorMsg2").html("");
									alert("密码重置成功");

								}else {
									$("#errorMsg2").html(data.errorMsg);
								}

							}
						})
						}else{
							alert("输入信息有错");
						}
					}

						function pwdCheck1() {
							let reg = /(?=.*[a-z_])(?=.*\d)[\S]/i;
							let select_password = $("#select_password").val();
							if(!reg.test(select_password) || select_password==''){
								$(".select_password").html("<span class='red'>请输入包含英文和数字的密码</span>")
								return false;
							}else{
								$(".select_password").html("<i class='fa fa-check-square' style='color: green;font-size: x-large'></i>");
								return true;
							}
						}
						function pwdSur1() {
							if ($("#select_password").val() === $("#select_pwd").val()) {
								$(".select_pwd").html("<i class='fa fa-check-square' style='color: green;font-size: x-large'></i>");
								return true;
							} else {
								$(".select_pwd").html("<span class='red'>两次密码输入不一致</span>")
								return false;
							}
						}
				</script>
		      </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!--轮播图-->

<div id="ad-carousel" class="carousel slide" data-ride="carouse1">
    <ol class="carousel-indicators">
        <li data-target="#ad-carousel" data-slide-to="0" class="active"></li>
        <li data-target="#ad-carousel" data-slide-to="1"></li>
        <li data-target="#ad-carousel" data-slide-to="2"></li>
    </ol>
    <div class="carousel-inner">
        <div class="item active">
            <img src="../images/food2.jpg" alt="1 slide">

            <div class="container">
                <div class="carousel-caption">
                    <h1>卤肉面</h1>

                    <p>面条美食特写高清图片。</p>

                    <p><a class="btn btn-lg btn-primary" href="http://localhost:8080/fonts/bootstrap-3.3.7/js/tests/images/food2.jpg" role="button" target="_blank">点我查看</a></p>
                </div>
            </div>
        </div>

        <div class="item">
            <img src="../images/food1.jpeg" alt="2 slide">

            <div class="container">
                <div class="carousel-caption">
                    <h1>草莓</h1>

                    <p>夏日清凉，新鲜水果。</p>

                    <p><a class="btn btn-lg btn-primary" href="http://localhost:8080/fonts/bootstrap-3.3.7/js/tests/images/food1.jpeg" target="_blank" role="button">点我查看</a></p>
                </div>
            </div>
        </div>

        <div class="item">
            <img src="../images/food3.jpg" alt="3 slide">

            <div class="container">
                <div class="carousel-caption">
                    <h1>芝士火锅</h1>

                    <p>品味韩国料理总会油然而生幸福感，例如吃部队芝士火锅吧，配色泽红润，食料丰富，满满一大锅，充实，满足。</p>

                    <p><a class="btn btn-lg btn-primary" href="http://localhost:8080/fonts/bootstrap-3.3.7/js/tests/images/food3.jpg" target="_blank" role="button">点我查看</a></p>
                </div>
            </div>
        </div>
    </div>

    <a class="left carousel-control" href="#ad-carousel" data-slide="prev">
    	<span class="glyphicon glyphicon-chevron-left"></span></a>
    <a class="right carousel-control" href="#ad-carousel" data-slide="next">
    	<span class="glyphicon glyphicon-chevron-right"></span></a>
</div>
<!--轮播图结束-->

<div class="container">
	<div class="row">
		<div class="col-md-8">
			<div class="main-topic" id="allValue" style="position: relative">
        
<!--				<div class="sub-topic-content-wrapper">-->
<!--					<div class="user-header">-->
<!--						<div class="row pull-left" style="text-align: center; width: 120px;">			-->
<!--							<p style="text-align: center;">-->
<!--								<img class="" src="img/thumb42x42.jpg" alt="User" style="width: 60px;">						-->
<!--							</p>-->
<!--							<h5 class="user-name ">panpan</h5>-->
<!--						</div>-->
<!--					</div>-->
<!--					<div class="col-sm-offset-2">-->
<!--						<a href="post.html" class="" style="font-size: large;font-weight: bold;">南昌美食&#45;&#45;瓦罐煨汤</a>-->
<!--						<span class="user-rating pull-right">&nbsp;&nbsp;&nbsp;234</span>-->
<!--						<span class="glyphicon glyphicon-eye-open pull-right" style="opacity: 0.6;"></span>-->
<!--						<div style="margin-top: 10px;">-->
<!--							<p class="topic-theme cont" style="font-size: large;font-weight: bold;">					-->
<!--								瓦罐煨汤沿袭民间传统煨汤方法，以土鸡、龟、天麻、猴头菇等为原料，加以天然矿泉水， 放入巨型土质陶器瓦缸内，用硬质木炭火恒温煨制达七小时以上。-->
<!--							</p>-->
<!--						</div>-->
<!--					</div>-->
<!--				</div>-->
<!--				<div class="user-footer border-bottom margin-bottom ">-->
<!--					<div class="pull-right ">-->
<!--						<p class="user-online expert" style="margin-right: 20px">2017/12/12</p>-->
<!--					</div>-->
<!--				</div>-->
				<span id="allValues">
				<div>
				<div class="sub-topic-content-wrapper">
					<div class="user-header">
						<div class="row pull-left" style="text-align: center; width: 120px;">
							<p style="text-align: center;">
								<img class="" src="img/thumb42x42.jpg" alt="User" style="width: 60px;">
							</p>
							<h5 class="user-name " id="text_username"></h5>
						</div>
					</div>
					<div class="col-sm-offset-2">
						<a href="post.html" class="" style="font-size: large;font-weight: bold;" id="text_title"></a>
						<span class="user-rating pull-right">&nbsp;&nbsp;&nbsp;234</span>
						<span class="glyphicon glyphicon-eye-open pull-right" style="opacity: 0.6;"></span>
						<div style="margin-top: 10px;">
							<p class="topic-theme cont" style="font-size: large;font-weight: bold;" id="text_text">

							</p>
						</div>
					</div>
				</div>
				<div class="user-footer border-bottom margin-bottom ">
					<div class="pull-right ">
						<p class="user-online expert" style="margin-right: 20px;">2017/12/12</p>
					</div>
				</div>
				</div>
				</span>
				<!--分页-->
				<nav aria-label="Page navigation" style="position: absolute;bottom: 0">
					<ul class="pagination" id="pageNum">
				    <li>
				      <a href="#" aria-label="Previous">
				        <span aria-hidden="true">&laquo;</span>
				      </a>
				    </li>
				    <li class="active"><a href="#">1 <span class="sr-only">(current)</span></a></li>
					<li><a href="#">2</a></li>
					<li><a href="#">3</a></li>
				    <li><a href="#">4</a></li>
				    <li><a href="#">5</a></li>
				    <li>
				      <a href="#" aria-label="Next">
				        <span aria-hidden="true">&raquo;</span>
				      </a>
				    </li>
					</ul>
					共<span id="totalPage"></span>页<span id="totalCount"></span>条
				</nav>
				<!--分页结束-->
			</div>
			
			<div>

				<!--填写标题-->
				<div class="row">
	        <div class="col-md-12">
	          <div class="input-group col-md-12">  
	            <input type="text" class="form-control" autocomplete="off" style="opacity: 0.8" placeholder="请填写标题" id="title">
	          </div>
		      </div>
		    </div></br>
		    <!--填写文本-->
				<div class="row">
			    <div class="col-md-12">
						<textarea class="col-md-12" style="opacity: 0.8" rows="18" autocomplete="off" id="text"></textarea>
			    </div>
		    </div></br>
		    <!--发表按钮-->
				<div class="row">
        	<div class="col-md-2">
				<div id="errorMsg3" style="color: #ff0000"></div>
				<button type="button" style="opacity: 0.8" class="btn btn-primary form-control" value="reset" onclick="fun5()">发表</button>
          </div>
		    </div></br>

			</div>
		</div>
		<script>
			var date = new Date();
			var myDate = date.toLocaleDateString();
			function fun5(){
				let title = $('#title').val();
				let  text = $('#text').val();
				function flash(){
					window.location.reload();}

				$.ajax({
					dataType: "json",
					// 提交方式 get 或 post
					type: "post",
					// 需要访问的 Servlet 的映射路径 urlPatterns
					url: "/releasedServlet",
					data: {
						title: title,
						text: text,
						createtime: myDate
					},

					success: function (data) {
						console.log(data)
						if (data.flag){
							$("#errorMsg3").html("");

							alert("发表成功");
							setTimeout(flash());

						}else {
							$("#errorMsg3").html(data.errorMsg);
						}

					}
				})

			}



			function load(currentPage,rname){
				$(function (){

					$.get("/routeServlet",{currentPage:currentPage,rname:rname},function (pb){
						$("#totalPage").html(pb.totalPage);
						$("#totalCount").html(pb.totalCount);

						var lis = "";
						var beforeNum = pb.currentPage - 1;
						if (beforeNum <= 0){
							beforeNum = 1;
						}
						var first = '<li>\n' +
								'\t\t\t\t      <a href="javascript:load('+beforeNum+',\''+rname+'\')" aria-label="Previous">\n' +
								'\t\t\t\t        <span aria-hidden="true">&laquo;</span>\n' +
								'\t\t\t\t      </a>\n' +
								'\t\t\t\t    </li>';
						lis += first;
						for (let i = 1;i <= pb.totalPage ; i++){
							var li;
							if (pb.currentPage == i){
								li = '<li class="active"><a href="javascript:load('+i+',\''+rname+'\')">'+i+'</a></li>';
							}else {
								li = '<li><a href="javascript:load('+i+',\''+rname+'\')">'+i+'</a></li>';
							}

							lis += li;
						}
						var nextNum = pb.currentPage + 1;
						if (nextNum > pb.totalPage){
							nextNum = pb.totalPage;
						}
						var last = '<li>\n' +
								'\t\t\t\t      <a href="javascript:load('+nextNum+',\''+rname+'\')" aria-label="Next">\n' +
								'\t\t\t\t        <span aria-hidden="true">&raquo;</span>\n' +
								'\t\t\t\t      </a>\n' +
								'\t\t\t\t    </li>';
						lis += last;

						$("#pageNum").html(lis);

						var content_lis = "";

						for (let i = 0; i < pb.list.length; i++) {
							var content = pb.list[i];

							var content_li=/*'<li>\n' +*/
									'\t\t\t\t<div>\n' +
									'\t\t\t\t<div class="sub-topic-content-wrapper">\n' +
									'\t\t\t\t\t<div class="user-header">\n' +
									'\t\t\t\t\t\t<div class="row pull-left" style="text-align: center; width: 120px;">\n' +
									'\t\t\t\t\t\t\t<p style="text-align: center;">\n' +
									'\t\t\t\t\t\t\t\t<img class="" src="img/thumb42x42.jpg" alt="User" style="width: 60px;">\n' +
									'\t\t\t\t\t\t\t</p>\n' +
									'\t\t\t\t\t\t\t<h5 class="user-name " id="text_username">'+content.username+'</h5>\n' +
									'\t\t\t\t\t\t</div>\n' +
									'\t\t\t\t\t</div>\n' +
									'\t\t\t\t\t<div class="col-sm-offset-2">\n' +
									'\t\t\t\t\t\t<a href="post.html?id='+content.id+'" class="" style="font-size: large;font-weight: bold;" id="text_title">'+content.title+'</a>\n' +
									'\t\t\t\t\t\t<span class="user-rating pull-right">&nbsp;&nbsp;&nbsp;'+content.readNum+'</span>\n' +
									'\t\t\t\t\t\t<span class="glyphicon glyphicon-eye-open pull-right" style="opacity: 0.6;"></span>\n' +
									'\t\t\t\t\t\t<div style="margin-top: 10px;">\n' +
									'\t\t\t\t\t\t\t<p class="topic-theme cont" style="font-size: large;font-weight: bold;" id="text_text">\n' +
									'\n' +
									'\t\t\t\t\t\t\t'+content.text+'</p>\n' +
									'\t\t\t\t\t\t</div>\n' +
									'\t\t\t\t\t</div>\n' +
									'\t\t\t\t</div>\n' +
									'\t\t\t\t<div class="user-footer border-bottom margin-bottom ">\n' +
									'\t\t\t\t\t<div class="pull-right ">\n' +
									'\t\t\t\t\t\t<p class="user-online expert" style="margin-right: 20px;">'+content.createtime+'</p>\n' +
									'\t\t\t\t\t</div>\n' +
									'\t\t\t\t</div>\n' +
									'\t\t\t\t</div>\n'
									/*'\t\t\t\t</li>'*/;
							content_lis += content_li;

							$("#allValues").html(content_lis);
						}
					})

				})
			}


		</script>

		<div class="col-md-4">
			<div class="main-topic">
				<div class="topic-content-wrapper">
					<h3 class="side-header">推荐用户</h3>
                    <span id="recommend">
                    <!--<li>
					<div class="row row-insider user-distance">
						<img class="main-topic-user pull-left" src="img/thumb42x42.jpg" alt="User">
						<div class="user-info-wrapper pull-left">
							<h4 class="user-name">PanPan</h4>
							<span class="user-online">关注数:</span>
							<span class="user-rating">234</span>
						</div>
						<a class="pull-right expert">关注</a>
					</div>
					</li>-->
					</span>
					<!--<div class="row row-insider user-distance">
						<img class="main-topic-user pull-left" src="img/thumb42x42.jpg" alt="User">
						<div class="user-info-wrapper pull-left">
							<h4 class="user-name">PanPan</h4>
							<span class="user-online">关注数:</span>
							<span class="user-rating">234</span>
						</div>
						<a class="pull-right expert">关注</a>
					</div>
					<div class="row row-insider user-distance">
						<img class="main-topic-user pull-left" src="img/thumb42x42.jpg" alt="User">
						<div class="user-info-wrapper pull-left">
							<h4 class="user-name">PanPan</h4>
							<span class="user-online">关注数:</span>
							<span class="user-rating">234</span>
						</div>
						<a class="pull-right expert">关注</a>
					</div>
					<p class="side-header forum-topics">FOLLOWERS</p>
					<p class="activity-time">23456</p>
					<p class="side-header forum-topics">Forum Topics Closed</p>
				</div>-->
			</div>
			<div class="main-topic">
				<div class="topic-content-wrapper">
					<p class="side-header">RELATED QUESTIONS</p>
					<p class="justify">My phone was stolen and want to get anotherhelp with that phone destroyed to?</p>
					<a href="$">4 Answers</a>
					<p class="side-header">RELATED QUESTIONS</p>
					<p class="justify">My phone was stolen and want to get anotherhelp with that phone destroyed to?</p>
					<a href="$">4 Answers</a>
					<p class="side-header">RELATED QUESTIONS</p>
					<p class="justify">My phone was stolen and want to get anotherhelp with that phone destroyed to?</p>
					<a href="$">4 Answers</a>
				</div>
			</div>
		</div>
	</div>
</div>

	<script>
		$(function (){
			$.get("/recommendServlet",function (list) {
				var lis = '';
				for (let i = 0; i < list.length; i++) {
					var li = /*'<li>\n' +*/
							'\t\t\t\t\t<div class="row row-insider user-distance">\n' +
							'\t\t\t\t\t\t<img class="main-topic-user pull-left" src="img/thumb42x42.jpg" alt="User">\n' +
							'\t\t\t\t\t\t<div class="user-info-wrapper pull-left">\n' +
							'\t\t\t\t\t\t\t<h4 class="user-name">'+list[i].username+'</h4>\n' +
							'\t\t\t\t\t\t\t<span class="user-online">关注数:</span>\n' +
							'\t\t\t\t\t\t\t<span class="user-rating">0</span>\n' +
							'\t\t\t\t\t\t</div>\n' +
							'\t\t\t\t\t\t<a class="pull-right expert">关注</a>\n' +
							'\t\t\t\t\t</div>\n'
							/*'\t\t\t\t\t</li>'*/
					lis += li;

				}
				$("#recommend").append(lis);
			})

		})

	</script>

<!-- JavaScript Includes -->
<script src="../vendor/jquery.min.js"></script>
<script src="../../transition.js"></script>
<script src="../../modal.js"></script>
<script src="../../tooltip.js"></script>
<script src="../../popover.js"></script>
<script src="../../collapse.js"></script>
<script src="../../carousel.js"></script>
<script src="../../dropdown.js"></script>
<script src="../../tab.js"></script>

<script type="text/javascript">
	function forget_onClick(){
		var hH=document.getElementsByTagName("h2");
		hH[1].innerHTML="找回密码";
	}
	function login_onClick(){
		var hH=document.getElementsByTagName("h2");
		hH[1].innerHTML="登录";
	}
	var countdown=60; 
	function settime(val) {

		if (countdown == 0) {
			val.removeAttribute("disabled");    
			val.innerHTML="免费获取验证码"; 
			countdown = 60; 
			clearTimeout(val);
		} else { 
			val.setAttribute("disabled", true); 
			val.innerHTML="重新发送(" + countdown + ")"; 
			countdown--; 
			setTimeout(function() { 
				settime(val) 
			},1000) 
		}

	}
	function fun3(){
		let select_email = $('#select_email').val();
		$.ajax({
			dataType: "json",
			// 提交方式 get 或 post
			type: "post",
			// 需要访问的 Servlet 的映射路径 urlPatterns
			url: "/emailServlet",
			data: {
				email: select_email
			},

			success: function (data) {
				if (data.flag){
					$("#errorMsg2").html("");
					alert("发送成功");
				}else {
					$("#errorMsg2").html(data.errorMsg);
				}

			}
		})
	}
</script>

<!-- JavaScript Test -->
<script>
var firefoxTestDone = false
function reportFirefoxTestResult(result) {
  if (!firefoxTestDone) {
    $('#ff-bug-test-result')
      .addClass(result ? 'text-success' : 'text-danger')
      .text(result ? 'PASS' : 'FAIL')  
  }
  firefoxTestDone = true
}

$(function () {
  $('.js-popover').popover()
  $('.js-tooltip').tooltip()
  $('#tall-toggle').click(function () {
    $('#tall').toggle()
  })
  $('#ff-bug-input').one('focus', function () {
    $('#myModal2').on('focus', function () {
      reportFirefoxTestResult(false)
    })
    $('#ff-bug-input').on('focus', function () {
      reportFirefoxTestResult(true)
    })
  })
})
</script>
</div>
</body>
</html>